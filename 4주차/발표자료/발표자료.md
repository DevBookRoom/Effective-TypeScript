# 4ì¥. íƒ€ì… ì„¤ê³„

## item28. ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•˜ëŠ” íƒ€ì…ì„ ì§€í–¥í•˜ê¸°

íƒ€ì…ì„ ì˜ ì„¤ê³„í•˜ë©´ ì½”ë“œë¥¼ ì§ê´€ì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

íš¨ê³¼ì ìœ¼ë¡œ íƒ€ì…ì„ ì„¤ê³„í•˜ë ¤ë©´ ìœ íš¨í•œ ìƒíƒœë§Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì„ ë§Œë“¤ì–´ë‚´ëŠ” ê²ƒì´ ì¢‹ë‹¤.

- ë¬´íš¨í•œ ìƒíƒœë¥¼ í¬í•¨í•˜ë„ë¡ íƒ€ì…ì„¤ê³„í•œ CASE

  ```
  interface State {
    pageText: string;
    isLoading: boolean; // loading ìƒíƒœ
    error?: string; // ì—ëŸ¬ ë©”ì‹œ
  }

  function renderPage(state: State) {
    if (state.error) {
      return <div>{state.error}</div>; // â“ğŸ¤·â€â™€ï¸ - isLoadingë„ true, errorë„ trueì´ë©´?
    } else if (state.isLoading) {
      return <div>Loading...</div>;
    }
    return <div>{state.pageText}</div>;
  }
  ```

  isLoadingê³¼ error ë‘ê°€ì§€ ì†ì„±ì´ ì¶©ëŒí•œë‹¤. (ì˜¤ë¥˜ì´ë©´ì„œ ë™ì‹œì— ë¡œë”©ì¤‘ì¼ ìˆ˜ ìˆìŒ == ë¬´íš¨í•œ ìƒíƒœ)

  ì´ëŸ° ë¬´íš¨í•œ ìƒíƒœê°€ ì¡´ì¬í•œë‹¤ë©´ ì œëŒ€ë¡œ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤.

- ë¬´íš¨í•œ ìƒíƒœ Xì¸ CASE

  ```tsx
  interface RequestPending {
    state: "pending";
  }
  interface RequestSuccess {
    state: "ok";
    pageText: string;
  }
  interface RequestError {
    state: "error";
    error: string;
  }
  type RequestState = RequestPending | RequestSuccess | RequestError; // íƒœê·¸ëœ ìœ ë‹ˆì˜¨ íƒ€ì…

  interface State {
    currentPage: string;
    requests: {
      [url: string]: RequestState; // urlë³„ë¡œ ìš”ì²­ ìƒíƒœë¥¼ ì €ì¥
    };
  }

  function renderPage(state: State) {
    const { currentPage } = state;
    const currentRequest = state.requests[currentPage];
    if (currentRequest.state === "pending") {
      return <div>Loading...</div>;
    } else if (currentRequest.state === "ok") {
      return <div>{currentRequest.pageText}</div>;
    } else {
      return <div>{currentRequest.error}</div>;
    }
  }
  ```

  stateê°€ currentRequest.state í•˜ë‚˜ë¡œ ê´€ë¦¬ë˜ê¸° ë•Œë¬¸ì—, ë¬´íš¨í•œ ìƒíƒœë¥¼ í—ˆìš©í•˜ì§€ ì•Šë„ë¡ ê°œì„ ë˜ì—ˆë‹¤.
  ì½”ë“œê°€ ê¸¸ì–´ì§€ê±°ë‚˜ í‘œí˜„í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆì§€ë§Œ, ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ì´ ë°©ì‹ì„ ì±„íƒí•´ì•¼í•œë‹¤.

---

## item29. ì‚¬ìš©í•  ë•ŒëŠ” ë„ˆê·¸ëŸ½ê²Œ, ìƒì„±í•  ë•ŒëŠ” ì—„ê²©í•˜ê²Œ

í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ì–´ë„ ë˜ì§€ë§Œ, ê²°ê³¼ë¥¼ ë°˜í™˜í•  ë•ŒëŠ” íƒ€ì…ì˜ ë²”ìœ„ê°€ ë” êµ¬ì²´ì ì´ì—¬ì•¼ í•œë‹¤.

### ììœ ë¡œìš´ íƒ€ì…ì˜ ë§¤ê°œë³€ìˆ˜ ë°›ê¸°

```tsx
declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): CameraOptions;

// ììœ ë¡œìš´ íƒ€ì…ì˜ ë§¤ê°œë³€ìˆ˜
interface CameraOptions {
  center?: LangLat;
  zoom?: number;
  bearing?: number;
  pitch?: number;
}

type LangLat =
  | { lat: number; lng: number }
  | { lon: number; lat: number }
  | [number, number];

type LngLatBounds =
  | { northeast: LangLat; southwest: LangLat }
  | [LangLat, LangLat]
  | [number, number, number, number];
```

- CameraOptionsì˜ ê°’ì€ ëª¨ë‘ ì„ íƒì ì´ì–´ì„œ, ê°’ì„ ê±´ë“œë¦¬ì§€ ì•Šìœ¼ë©° ë‹¤ë¥¸ ê°’ ì„¤ì • ê°€ëŠ¥
- LngLatíƒ€ì…ë„ `{lng, lat}`, `{lon, lat}`, `[lng,lot]` ëª¨ë‘ ë„£ì„ìˆ˜ ìˆì–´ í¸ë¦¬í•¨

### ìƒì„±ë  ë•Œì˜ ë°˜í™˜íƒ€ì…ë„ ë„ˆë¬´ ììœ ë¡­ë‹¤ë©´?

```tsx
declare function viewportForBounds(bounds: LngLatBounds): CameraOptions;

function focusOnFeature(f: Feature) {
  const bounds = calculateBoundingBox(f);
  const camera = viewportForBounds(bounds); // ğŸ‘ ë°˜í™˜ íƒ€ì…ì´ CameraOptionsë¡œ, ë„ˆë¬´ ììœ ë¡œì›€!
  setCamera(camera);

  const {
    center: { lat, lng }, // // âŒ Property 'lat' does not exist on type 'LangLat | undefined'
    zoom,
  } = camera;

  zoom; // ğŸ‘ íƒ€ì…ì´ number | undefined
  window.location.search = `?lat=${lat}&lng=${lng}&zoom=${zoom}`;
}
```

- CameraOptionì˜ centerì†ì„±ì´ ì„ íƒì ì´ê¸° ë•Œë¬¸ì—, centerì˜ íƒ€ì…ì´ `LangLat | undefined`
- zoom ë˜í•œ `number|undefined`ë¡œ ì¶”ë¡ ë¨

â‡’ viewportForBoundsì˜ íƒ€ì…ì„ ì–¸ì´ ì‚¬ìš©ë  ë•Œ ë¿ ì•„ë‹ˆë¼ ë§Œë“¤ì–´ì§ˆ ë•Œë„ ë„ˆë¬´ ììœ ë¡œìš´ê²ƒì´ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ë‹¤.

â‡’ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ ë„“ìœ¼ë©´ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ì§€ë§Œ, ë°˜í™˜íƒ€ì…ì˜ ë²”ìœ„ê°€ ë„“ìœ¼ë©´ ë¶ˆí¸í•˜ë‹¤. ë”°ë¼ì„œ ë°˜í™˜íƒ€ì…ì„ ì—„ê²©í•˜ê²Œ ì ìš©í•´ì•¼í•œë‹¤.

### ìƒì„±ë  ë•Œì˜ ë°˜í™˜íƒ€ì…ì„ ì—„ê²©í•˜ê²Œ ì ìš©í•˜ê¸°

ìœ ë‹ˆì˜¨ íƒ€ì…ì˜ ìš”ì†Œë³„ ë¶„ê¸°ë¥¼ ìœ„í•œ ë°©ë²™ì€, ê¸°ë³¸ í˜•ì‹ì„ ë”°ë¡œ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ë‹¤.

ê¸°ë³¸ í˜•íƒœë¥¼ ë°˜í™˜íƒ€ì…ìœ¼ë¡œ ì“°ê³ , ëŠìŠ¨í•œ í˜•íƒœë¥¼ ë§¤ê°œë³€ìˆ˜íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤.

```tsx
// ì¢Œí‘œì˜ ê¸°ë³¸ í˜•ì‹
interface LngLat {
  lat: number;
  lng: number;
}
// ë” ììœ ë¡œìš´ í˜•ì‹ í¬í•¨í•œ ëŠìŠ¨í•œ íƒ€ì…
type LngLatLike = LngLat | { lon: number; lat: number } | [number, number];
type LngLatBounds =
  | { northeast: LngLatLike; southwest: LngLatLike }
  | [LngLatLike, LngLatLike]
  | [number, number, number, number];
```

- â€œë°°ì—´ê°™ì€ê²ƒâ€ì˜ ì‚¬ìš©ì„ ìœ„í•´ ArrayLikeë¥¼ ì‚¬ìš©í–ˆë˜ ê²ƒ ì²˜ëŸ¼, `LngLat`ê³¼ `LngLatLike`ë¡œ êµ¬ë¶„

  - ğŸ¤–GPTì„¤ëª… - Type & TypeLike
    TypeScriptì—ì„œÂ Typeê³¼Â TypeLikeÂ íŒ¨í„´ì€ íƒ€ì… ì‹œìŠ¤í…œì˜ ì¤‘ìš”í•œ ì„¤ê³„ ê´€ë¡€ì…ë‹ˆë‹¤.

    - **ê¸°ë³¸ê´€ë¡€**
      1. **ê¸°ë³¸ íƒ€ì…Â (Type)**:
         - ì •í™•í•˜ê³ Â ì—„ê²©í•œ êµ¬ì¡°ë¥¼ ê°€ì§„Â íƒ€ì…
         - ëª…í™•í•œ ì†ì„±ê³¼ ë™ì‘ì„ ì •ì˜
         - ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤Â ì œê³µ
      2. **ìœ ì—°í•œ íƒ€ì…Â (TypeLike)**:
         - ê¸°ë³¸ íƒ€ì…ì„Â í¬í•¨í•˜ëŠ”Â ìœ ë‹ˆì˜¨ íƒ€ì…
         - ìœ ì‚¬í•˜ì§€ë§Œ êµ¬ì¡°ê°€ ì¡°ê¸ˆ ë‹¤ë¥¸Â ì—¬ëŸ¬ í˜•íƒœ í—ˆìš©
         - ë”Â ë„“ì€ ë²”ìœ„ì˜ ì…ë ¥ê°’ ìˆ˜ìš©
    - **ì£¼ìš” íŠ¹ì§•**
      - **í˜¸í™˜ì„±**:Â TypeLikeëŠ”Â í•­ìƒÂ Typeê³¼ í˜¸í™˜ë¨Â (Typeì€Â TypeLikeì˜ ë¶€ë¶„ì§‘í•©)
      - **ë°©í–¥ì„±**:Â ì—„ê²©í•œ ë‚´ë¶€ êµ¬í˜„Â â†’ ìœ ì—°í•œÂ ì™¸ë¶€ API
      - **ì‚¬ìš©Â ë¬¸ë§¥**: ì£¼ë¡œ í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ì—Â TypeLike, ë°˜í™˜ ê°’ì—Â TypeÂ ì‚¬ìš©
    - **ìì£¼Â ì‚¬ìš©ë˜ëŠ”Â ì˜ˆì‹œ**

      1. **Arrayì™€ ArrayLike**

         ```tsx
         //Â Array:Â ëª¨ë“ Â ë°°ì—´Â ë©”ì„œë“œÂ í¬í•¨*
         const arr: Array<number> = [1, 2, 3];
         //Â ArrayLike:Â lengthì™€Â ì¸ë±ìŠ¤Â ì ‘ê·¼ë§ŒÂ ê°€ëŠ¥*
         const arrLike: ArrayLike<number> = { 0: 1, 1: 2, 2: 3, length: 3 };
         ```

      2. **Promiseì™€ PromiseLike**

         ```tsx
         // Promise: ì™„ì „í•œ Promise API
         const p: Promise<string> = new Promise((resolve) => resolve("done"));

         // PromiseLike: then ë©”ì„œë“œë§Œ ìˆìœ¼ë©´ ë¨
         const pLike: PromiseLike<string> = {
           then(onfulfilled) {
             return onfulfilled("done");
           },
         };
         ```

- LngLatBoundsë¥¼ ìƒì„±í•˜ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ê°€ ìˆë‹¤ë©´, `LngLatBounds`ì™€ `LngLatBoundsLike`ë¡œ êµ¬ë¶„í•˜ë©´ ë¨

```tsx
// Cameraì˜ ê¸°ë³¸ í˜•ì‹
interface Camera {
  center: LngLat;
  zoom: number;
  bearing: number;
  pitch: number;
}
// ë” ììœ ë¡œìš´ í˜•ì‹ì„ í¬í•¨í•œ ëŠìŠ¨í•œ íƒ€ì…
interface CameraOptions extends Omit<Partial<Camera>, "center"> {
  center?: LngLatLike;
}
```

- ì™„ë²½í•˜ê²Œ ì •ì˜ëœ `Camera`ì™€, ë¶€ë¶„ì ìœ¼ë¡œ ì •ì˜ëœ `CameraOptions`ë¥¼ êµ¬ë¶„
  - ğŸ¤–GPTì„¤ëª… - Â CameraOptions extends Omit<Partial<Camera>, "center">
    1. Partial<Camera>
       - Partialì€ íƒ€ì…ì˜ ëª¨ë“ Â ì†ì„±ì„Â ì„ íƒì (optional)ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤.
       - CameraÂ ì¸í„°í˜ì´ìŠ¤ì˜ ëª¨ë“  ì†ì„±(center,Â zoom,Â bearing,Â pitch)ì´ ì„ íƒì ì´ ë©ë‹ˆë‹¤.
         ```tsx
         {
         	center?:Â LngLat;
         	zoom?:Â number;
         	bearing?:Â number;
         	pitch?:Â number;
         }
         ```
    2. Omit<Partial<Camera>, "center">
       - Omitì€ íƒ€ì…ì—ì„œÂ íŠ¹ì • ì†ì„±ì„ ì œì™¸í•©ë‹ˆë‹¤.
       - Partial<Camera>ì—ì„œÂ "center"Â ì†ì„±ì„Â ì œì™¸í•©ë‹ˆë‹¤.
         ```tsx
            {
              zoom?: number;
              bearing?: number;
              pitch?: number;
            }
         ```
    3. interface CameraOptions extends Omit<Partial<Camera>, "center">
       - CameraÂ ì¸í„°í˜ì´ìŠ¤ì˜ ëŒ€ë¶€ë¶„ì˜ ì†ì„±ì„ ìƒì†ë°›ë˜,Â centerÂ ì†ì„±ë§Œ íŠ¹ë³„í•˜ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
       - ëª¨ë“  ì†ì„±ì´Â ì„ íƒì (optional)ì…ë‹ˆë‹¤.
         ```tsx
            {
              center?: LngLatLike;      // ì„ íƒì 
              zoom?: number;            // ì„ íƒì 
              bearing?: number;         // ì„ íƒì 
              pitch?: number;           // ì„ íƒì 
            }
         ```

```tsx
declare function setCamera(camera: CameraOptions): void;
declare function viewportForBounds(bounds: LngLatBounds): Camera; // ğŸ‘ ë°˜í™˜íƒ€ì…ì„ Cameraë¡œ ë” ì—„ê²©í•˜ê²Œ!

function focusOnFeature(f: Feature) {
  const bounds = calculateBoundingBox(f);
  const camera = viewportForBounds(bounds); // âœ… ë°˜í™˜íƒ€ì…ì´ Camera
  setCamera(camera); // Cameraíƒ€ì…ì€ CameraOptionsíƒ€ì…ì— í• ë‹¹ ê°€ëŠ¥

  const {
    center: { lat, lng }, // âœ… ì •ìƒ
    zoom,
  } = camera;
  zoom; // ğŸ‘ íƒ€ì…ì´ number
  window.location.search = `?lat=${lat}&lng=${lng}&zoom=${zoom}`;
}
```

---

## item30. ë¬¸ì„œì— íƒ€ì… ì •ë³´ë¥¼ ì“°ì§€ ì•Šê¸°

ì£¼ì„ì— ë³€ìˆ˜ëª…ê³¼ íƒ€ì…ì •ë³´ë¥¼ ì ì§€ ë§ì•„ì•¼ í•œë‹¤. íƒ€ì… ì •ë³´ì— ëª¨ìˆœì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

- ì£¼ì„

  ```tsx
  /**
   * í˜ì´ì§€ì— ë”°ë¥¸ ì „ê²½ìƒ‰ ë°˜í™˜
   * ë§¤ê°œë³€ìˆ˜ëŠ” 0ë˜ëŠ” 1
   * ë§¤ê°œë³€ìˆ˜ê°€ ì—†ì„ë• í‘œì¤€ ì „ê²½ìƒ‰ ë°˜í™˜
   */
  function getForegroundColor(page: string) {
    return page == "login" ? { r: 255, g: 255, b: 255 } : { r: 0, g: 0, b: 0 };
  }
  ```

  - ê°•ì œí•˜ì§€ ì•ŠëŠ” ì´ìƒ ì£¼ì„ì€ ì½”ë“œì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠëŠ”ë‹¤.

- ì½”ë“œë¡œ ì‘ì„±
  ```tsx
  /**
   * í˜ì´ì§€ì— ë”°ë¥¸ ì „ê²½ìƒ‰ ë°˜í™˜
   */
  function getForegroundColor(page: string): Color {
    return page == "login" ? { r: 255, g: 255, b: 255 } : { r: 0, g: 0, b: 0 };
  }
  ```
  - íƒ€ì…êµ¬ë¬¸ì€ ì»´íŒŒì¼ëŸ¬ê°€ ì²´í¬í•´ì£¼ê¸° ë•Œë¬¸ì— êµ¬í˜„ì²´ì™€ ì •í•©ì„±ì— ì–´ê¸‹ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ ì½”ë“œê°€ ì¶”í›„ ë³€ê²½ë˜ë”ë¼ë„ ì •ë³´ê°€ ë™ê¸°í™”ë˜ê¸°ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ì— ìš©ì´í•˜ë‹¤.

+) ë³€ìˆ˜ëª…ì—ë„ íƒ€ì…ì„ ë„£ì§€ ì•ŠëŠ”ê²Œ ì¢‹ë‹¤. (`ageNum`âŒ, `age: number`âœ…)

---

## item31. íƒ€ì… ì£¼ë³€ì— nullê°’ ë°°ì¹˜í•˜ê¸°
